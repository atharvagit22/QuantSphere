import{q as Z,j as e,k as be,r as n,t as je,l as ge,z as ie}from"./index-BQwJztVw.js";import{i as Se,d as Ce}from"./chartSetup-BymEZizQ.js";import"./lightweight-charts.production-D4lkRJ8h.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Me=Z("circle-plus",Te);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ae=Z("clock",Le);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ee=Z("refresh-cw",De);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Re=Z("search",Ue);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$e=Z("x",Oe);function Pe({closes:x=[],w:v=100,h=28}){if(!x||x.length<2)return e.jsx("div",{className:"text-xs text-gray-400",children:"—"});const m=Math.min(...x),k=Math.max(...x)-m||1,P=v/(x.length-1),E=`M${x.map((L,q)=>`${q*P},${h-(L-m)/k*h}`).join(" L ")}`,_=(x[x.length-1]-x[0])/(x[0]||1)*100>=0?"#34d399":"#fb7185";return e.jsx("svg",{width:v,height:h,viewBox:`0 0 ${v} ${h}`,children:e.jsx("path",{d:E,fill:"none",stroke:_,strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})})}function qe({symbol:x,pct:v=0,volume:h=0,closes:m=[],onOpen:N,onToggleWatch:k,watched:P=!1}){const S=v>=0?"+":"";return e.jsxs("div",{className:"p-2 rounded hover:shadow-lg transition-colors bg-[#07121a]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:x}),e.jsx("div",{className:"text-xs text-gray-400",children:h?h>=1e3?`${Math.round(h/1e3)}k`:h:"—"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("div",{className:`text-sm font-semibold ${v>=0?"text-emerald-400":"text-rose-400"}`,children:v===0?"—":`${S}${v.toFixed(2)}%`}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>k==null?void 0:k(x),className:"text-xs px-2 py-0.5 rounded bg-white/3",children:P?"★":"☆"}),e.jsx("button",{onClick:()=>N==null?void 0:N(x),className:"text-xs px-2 py-0.5 rounded bg-indigo-600 text-white",children:"Open"})]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(Pe,{closes:m,w:120,h:28})})]})}function Ie({open:x,onClose:v,onSelect:h}){const{fetchTrending:m,fetchOHLC:N}=be(),[k,P]=n.useState(""),[S,E]=n.useState("stocks"),[H,_]=n.useState([]),[L,q]=n.useState(["AAPL","MSFT","TSLA","NVDA","BTCUSDT","ETHUSDT"]),[F,I]=n.useState({}),[B,z]=n.useState("watchlist"),ne=n.useRef(null),ee=n.useRef(!0),le=n.useMemo(()=>({stocks:["AAPL","MSFT","NVDA","TSLA","AMZN","META","INTC"],etfs:["SPY","QQQ","IVV","VTI"],crypto:["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT"],futures:["NIFTY","BANKNIFTY","ES1!"],forex:["EURUSD","GBPUSD","USDJPY"],commodities:["GOLD","SILVER","USOIL"]}),[]);n.useEffect(()=>(ee.current=!0,(async()=>{try{const s=await(m==null?void 0:m())||[];if(!ee.current)return;_(s.slice(0,8))}catch{}})(),()=>{ee.current=!1}),[m]);const W=(()=>{const s=le[S]||[],i=k.trim().toLowerCase(),d=s.filter(b=>(b+"").toLowerCase().includes(i)),w=L.filter(b=>(b+"").toLowerCase().includes(i)),A=H.map(b=>b.symbol).filter(b=>b.toLowerCase().includes(i));return Array.from(new Set([...w,...A,...d]))})();function U(s){h==null||h(s),v==null||v()}function Y(s){q(i=>i.includes(s)?i.filter(d=>d!==s):[s,...i])}async function C(s=L){if(!s||s.length===0){I({});return}try{const i=await(m==null?void 0:m(s))||[],d={};i.forEach(o=>{d[o.symbol]={pct:typeof o.pct=="number"?o.pct*100:typeof o.pct=="number"?o.pct:0,volume:o.volume??0,price:o.price??null}});const w=s.slice(0,20),A=w.map(async o=>{try{const j=await(N==null?void 0:N(o,"1min","auto"));if(!(j!=null&&j.candles))return{sym:o,closes:[]};const O=(j.candles||[]).map(R=>Number(R.close||0)).slice(-40);return{sym:o,closes:O}}catch{return{sym:o,closes:[]}}}),Q=await Promise.all(A),b={};w.forEach(o=>{const j=d[o]||{},O=Q.find(R=>R.sym===o);b[o]={pct:j.pct??0,volume:j.volume??0,price:j.price??null,closes:O&&O.closes||[]}}),s.slice(20).forEach(o=>{var j,O,R;b[o]={pct:((j=d[o])==null?void 0:j.pct)??0,volume:((O=d[o])==null?void 0:O.volume)??0,price:((R=d[o])==null?void 0:R.price)??null,closes:[]}}),I(o=>({...o,...b}))}catch(i){console.warn("refreshHeatmap:",i)}}n.useEffect(()=>(C(),ne.current=setInterval(()=>{C()},15e3),()=>{try{clearInterval(ne.current)}catch{}}),[L,m,N]);function ae(){const s=[...L];return B==="pct"?s.sort((i,d)=>{var w,A;return(((w=F[d])==null?void 0:w.pct)??0)-(((A=F[i])==null?void 0:A.pct)??0)}):B==="volume"?s.sort((i,d)=>{var w,A;return(((w=F[d])==null?void 0:w.volume)??0)-(((A=F[i])==null?void 0:A.volume)??0)}):B==="symbol"?s.sort((i,d)=>i.localeCompare(d)):s}return e.jsx(je.div,{initial:{x:"100%"},animate:{x:x?0:"100%"},transition:{type:"spring",stiffness:280,damping:30},className:"fixed right-0 top-0 h-full w-[420px] max-w-full z-50 shadow-2xl",style:{pointerEvents:x?"auto":"none"},children:e.jsxs("div",{className:"h-full bg-[#071018] border-l border-[#0f1720] flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between border-b border-[#0f1720]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-lg font-semibold",children:"Market"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Explorer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{m==null||m().then(s=>_((s||[]).slice(0,8))).catch(()=>{}),C()},title:"Refresh trending",className:"px-2 py-1 rounded bg-[#0b1220] text-xs text-gray-300 flex items-center gap-2",children:[e.jsx(Ee,{size:14})," Refresh"]}),e.jsx("button",{onClick:v,className:"p-2 rounded hover:bg-[#0b1220]",children:e.jsx($e,{size:18})})]})]}),e.jsx("div",{className:"px-4 py-3 border-b border-[#0f1720]",children:e.jsxs("div",{className:"flex items-center gap-2 bg-[#06101a] rounded px-3 py-2",children:[e.jsx(Re,{size:16,className:"text-gray-400"}),e.jsx("input",{className:"flex-1 bg-transparent outline-none text-sm text-gray-200",placeholder:"Search symbol or name (eg. AAPL, BTCUSDT)",value:k,onChange:s=>P(s.target.value)}),e.jsx("button",{className:"text-xs text-gray-400 px-2 py-1",onClick:()=>P(""),children:"Clear"})]})}),e.jsx("div",{className:"px-3 py-2 border-b border-[#0f1720]",children:e.jsx("div",{className:"flex gap-2 text-xs",children:["stocks","etfs","crypto","futures","forex","commodities"].map(s=>e.jsx("button",{onClick:()=>E(s),className:`px-3 py-1 rounded text-sm ${S===s?"bg-gradient-to-r from-[#7c3aed] to-[#06b6d4] text-white":"text-gray-300 hover:bg-[#08121a]"}`,children:s.toUpperCase()},s))})}),e.jsxs("div",{className:"p-3 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Watchlist"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Quick picks"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Sort"}),e.jsxs("select",{value:B,onChange:s=>z(s.target.value),className:"text-xs bg-[#07121a] px-2 py-1 rounded",children:[e.jsx("option",{value:"watchlist",children:"Watchlist order"}),e.jsx("option",{value:"pct",children:"% Change"}),e.jsx("option",{value:"volume",children:"Volume"}),e.jsx("option",{value:"symbol",children:"Symbol"})]}),e.jsxs("div",{className:"ml-auto text-xs text-gray-400",children:["Tiles: ",Math.min(L.length,20)]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ae().slice(0,20).map(s=>{const i=F[s]||{};return e.jsx(qe,{symbol:s,pct:i.pct,volume:i.volume,closes:i.closes,onOpen:U,onToggleWatch:Y,watched:L.includes(s)},s)})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Trending"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Live movers"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:H.length===0?e.jsx("div",{className:"text-gray-500 col-span-3",children:"No data"}):H.map(s=>e.jsxs("div",{className:"p-2 bg-[#07121a] rounded",children:[e.jsx("div",{className:"font-medium",children:s.symbol}),e.jsx("div",{className:"text-xs text-gray-400",children:s.pct?(s.pct*100).toFixed(2)+"%":""}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{onClick:()=>U(s.symbol),className:"flex-1 px-2 py-1 bg-indigo-600 text-white rounded text-xs",children:"Open"}),e.jsx("button",{onClick:()=>Y(s.symbol),className:"px-2 py-1 border rounded text-xs",children:"★"})]})]},s.symbol))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Results"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[W.length," items"]})]}),e.jsx("div",{className:"space-y-2",children:W.length===0?e.jsx("div",{className:"text-gray-500",children:"No matches"}):W.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-[#07121a] rounded hover:bg-[#091624]",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s}),e.jsx("div",{className:"text-xs text-gray-400",children:"—"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Y(s),className:"p-1",title:"Toggle watch",children:"★"}),e.jsx("button",{onClick:()=>U(s),className:"px-3 py-1 bg-gradient-to-r from-[#7c3aed] to-[#06b6d4] text-white rounded text-sm",children:"Open"})]})]},s))})]}),e.jsx("div",{className:"h-6"})]}),e.jsx("div",{className:"px-3 py-2 border-t border-[#0f1720] text-xs text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{size:14})," Real-time streams for crypto (Binance). Stocks via AlphaVantage (rate-limited)."]})})]})})}function We(){var pe,fe;const{fetchOHLC:x,fetchOrderbook:v,connectWS:h,disconnectWS:m,subscribeTrades:N,unsubscribeTrades:k,fetchTrending:P,liveData:S,setLiveData:E,syncLiveToDashboard:H,mode:_,setMode:L,openPosition:q,closePosition:F,updateUnrealizedPrices:I,positions:B,orders:z,addAlert:ne,alerts:ee,pushAlertEvent:le}=be(),[g,W]=n.useState("ETHUSDT"),[U,Y]=n.useState("auto"),[C,ae]=n.useState("5min"),[s,i]=n.useState([]),[d,w]=n.useState(null),[A,Q]=n.useState(!1),[b,o]=n.useState(!0),[j,O]=n.useState(!0),[R,Be]=n.useState(!0),[ye,oe]=n.useState(!1),G=n.useRef(null),te=n.useRef(null),de=n.useRef(null),ue=n.useRef(null),X=n.useRef(!1),J=n.useRef({}),se=n.useRef(null),K=n.useRef(null);function xe(t){return typeof t=="string"&&t.endsWith("s")}function Ne(t=500){return Object.keys(J.current).map(c=>Number(c)).sort((c,a)=>c-a).slice(-t).map(c=>{const a=J.current[c];return{time:new Date(a.time*1e3).toISOString(),open:a.open,high:a.high,low:a.low,close:a.close,volume:a.volume}})}async function re(t=g,r=C,l=U){Q(!0);try{if(xe(r)){J.current={},i([]);try{const c=await x(t,"1min",l);c!=null&&c.candles&&c.candles.length}catch{}}else{const c=await x(t,r,l);if(c!=null&&c.candles){i(c.candles);try{E({symbol:t,interval:r,source:c.source,candles:c.candles})}catch{}}else i([])}}catch(c){console.error("loadOHLC",c),ie.error("Failed to load OHLC"),i([])}finally{Q(!1)}}async function ce(t=g){try{const r=await v(t,50);w(r)}catch{w(null)}}n.useEffect(()=>{if(!te.current)return;const t=Se(te.current,{height:420});G.current=t;try{t.chart.subscribeCrosshairMove(l=>{try{const c=document.getElementById("price-tracker");if(!c)return;if(!l||!l.time){c.style.display="none";return}if(!l.seriesPrices||!t.candleSeries){c.style.display="none";return}const a=l.seriesPrices.get&&l.seriesPrices.get(t.candleSeries);if(a==null){c.style.display="none";return}c.style.display="block",c.innerText=`$${Number(a).toFixed(2)}`}catch{}})}catch{}const r=()=>{try{t.chart.applyOptions({width:te.current.clientWidth})}catch{}};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r);try{Ce(t)}catch{}G.current=null}},[]),n.useEffect(()=>{const t=G.current;if(!t)return;const{setCandles:r,setVolume:l,addOverlayLine:c,resetOverlays:a,setMarkers:p}=t;if(r(s),l(s),z&&Array.isArray(z)&&z.length){const T=z.filter(f=>f.price!=null&&f.time!=null).map(f=>{var M,y,u,$;return{time:Math.floor(new Date(f.time).getTime()/1e3),position:((M=f.side)==null?void 0:M.toLowerCase())==="buy"?"below":"above",color:((y=f.side)==null?void 0:y.toLowerCase())==="buy"?"#10b981":"#ef4444",shape:"arrowUp",text:`${(($=(u=f.side)==null?void 0:u.toUpperCase)==null?void 0:$.call(u))||""} ${f.qty||""}`}});p(T)}else p([]);if(a(),de.current=null,ue.current=null,j&&s.length){const T=s.map(u=>Number(u.close??u.c??0)),M=ge(T,20).map((u,$)=>({time:Math.floor(new Date(s[$].time).getTime()/1e3),value:u})),y=c({color:"#f97316"});try{y.setData(M)}catch{}de.current=y}if(R&&s.length){const T=s.map(u=>Number(u.close??u.c??0)),M=ge(T,50).map((u,$)=>({time:Math.floor(new Date(s[$].time).getTime()/1e3),value:u})),y=c({color:"#a78bfa"});try{y.setData(M)}catch{}ue.current=y}},[s,j,R,z]),n.useEffect(()=>{const t=r=>{try{const l=r.p?Number(r.p):r.k&&r.k.c?Number(r.k.c):null,c=r.q?Number(r.q):r.k&&r.k.q?Number(r.k.q):0,a=r.T?Math.floor(Number(r.T)/1e3):Math.floor(Date.now()/1e3);if(l==null||!X.current)return;const p=J.current[a]||{open:l,high:l,low:l,close:l,volume:0,time:a};p.open||(p.open=l),p.high=Math.max(p.high,l),p.low=Math.min(p.low,l),p.close=l,p.volume=(p.volume||0)+(c||0),p.time=a,J.current[a]=p;const T=Ne(500);i(T);try{E(f=>({...f||{},symbol:g,interval:C,candles:T,source:"ws"}))}catch{}try{I(g,l)}catch{}}catch{}};if(X.current){se.current=t;try{N(t)}catch{}}return()=>{try{se.current&&(k(se.current),se.current=null)}catch{}}},[N,k,g,E,I]),n.useEffect(()=>{const t=r=>{var l,c;try{const a=r.p?Number(r.p):(l=r.k)!=null&&l.c?Number(r.k.c):null,p=r.q?Number(r.q):(c=r.k)!=null&&c.q?Number(r.k.q):0;if(a==null||X.current)return;i(T=>{var ve;const f=Array.isArray(T)?[...T]:[],M=f[f.length-1],y=new Date,u=M?new Date(M.time):null,$=u&&u.getUTCFullYear()===y.getUTCFullYear()&&u.getUTCMonth()===y.getUTCMonth()&&u.getUTCDate()===y.getUTCDate()&&u.getUTCHours()===y.getUTCHours()&&u.getUTCMinutes()===y.getUTCMinutes();let V;if($&&M){const D={...M};D.close=a,a>D.high&&(D.high=a),a<D.low&&(D.low=a),D.volume=(D.volume||0)+p,V=[...f.slice(0,-1),D]}else{const D={time:y.toISOString(),open:a,high:a,low:a,close:a,volume:p};V=[...f,D].slice(-500)}try{E({symbol:g,interval:C,candles:V,source:"ws"})}catch{}try{(ve=G.current)!=null&&ve.updateLatest&&G.current.updateLatest(V[V.length-1])}catch{}try{I(g,a)}catch{}return V})}catch{}};try{N(t)}catch{}return()=>{try{k(t)}catch{}}},[N,k,I,g,C,E]),n.useEffect(()=>{if(X.current=xe(C),re(),ce(),!X.current&&b?K.current=setInterval(()=>{re(),ce()},15e3):K.current&&(clearInterval(K.current),K.current=null),U==="binance"||/USDT$|BTC$|ETH$/i.test(g)&&U==="auto")try{h(g,{type:"trade"})}catch{}else try{m()}catch{}return()=>{try{clearInterval(K.current)}catch{}try{m()}catch{}}},[g,C,U,b]);function ke(){if(!(S!=null&&S.candles)||!S.candles.length){alert("No live dataset to sync.");return}try{H(S),L("csv"),ie.success("Synced to Dashboard")}catch{ie.error("Sync failed")}}const me=((pe=d==null?void 0:d.bids)==null?void 0:pe.slice(0,10).map(t=>({price:Number(t[0]),qty:Number(t[1])})))||[],he=((fe=d==null?void 0:d.asks)==null?void 0:fe.slice(0,10).map(t=>({price:Number(t[0]),qty:Number(t[1])})))||[];function we(t){W(t),setTimeout(()=>{re(t),ce(t),/USDT$|BTC$|ETH$/i.test(t)&&h(t,{type:"trade"})},40)}return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{value:g,onChange:t=>W(t.target.value.toUpperCase()),className:"px-3 py-2 rounded bg-[#071022] border border-[#0f1720] text-sm"}),e.jsxs("select",{value:U,onChange:t=>Y(t.target.value),className:"px-3 py-2 rounded bg-[#071022] border border-[#0f1720] text-sm",children:[e.jsx("option",{value:"auto",children:"Auto"}),e.jsx("option",{value:"alphavantage",children:"AlphaVantage"}),e.jsx("option",{value:"binance",children:"Binance"})]}),e.jsxs("select",{value:C,onChange:t=>ae(t.target.value),className:"px-3 py-2 rounded bg-[#071022] border border-[#0f1720] text-sm",children:[e.jsx("option",{value:"1s",children:"1s"}),e.jsx("option",{value:"5s",children:"5s"}),e.jsx("option",{value:"10s",children:"10s"}),e.jsx("option",{value:"30s",children:"30s"}),e.jsx("option",{value:"1min",children:"1min"}),e.jsx("option",{value:"5min",children:"5min"}),e.jsx("option",{value:"15min",children:"15min"}),e.jsx("option",{value:"daily",children:"daily"})]}),e.jsx("button",{onClick:()=>re(),className:"btn btn-primary",children:"Load"}),e.jsxs("button",{onClick:()=>oe(!0),title:"Open Market Panel",className:"px-3 py-2 rounded bg-gradient-to-br from-[#7c3aed] to-[#06b6d4] text-white flex items-center gap-2",children:[e.jsx(Me,{size:16})," Market"]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Auto"}),e.jsx("input",{type:"checkbox",checked:b,onChange:()=>o(t=>!t)}),e.jsx("button",{onClick:ke,className:"btn btn-primary ml-2",children:"Sync → Dashboard"})]})]}),e.jsxs(je.div,{className:"glass-card p-4",initial:{opacity:0,y:6},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Live Chart"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.length," points"]})]}),e.jsxs("div",{className:"relative mt-3",style:{height:420},children:[e.jsx("div",{ref:te,style:{height:"100%",width:"100%"}}),e.jsx("div",{id:"price-tracker",style:{position:"absolute",right:12,top:32,padding:"6px 10px",background:"rgba(10,11,13,0.85)",color:"#fff",borderRadius:8,fontSize:12,display:"none",zIndex:20}})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Orderbook (top 10)"}),e.jsxs("div",{className:"mt-3 text-xs",children:[e.jsxs("div",{className:"flex justify-between font-medium border-b pb-2",children:[e.jsx("div",{children:"Bids"}),e.jsx("div",{children:"Asks"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsx("div",{children:me.length===0?e.jsx("div",{className:"text-gray-400",children:"—"}):me.map((t,r)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("div",{children:t.price}),e.jsx("div",{children:t.qty})]},r))}),e.jsx("div",{children:he.length===0?e.jsx("div",{className:"text-gray-400",children:"—"}):he.map((t,r)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("div",{children:t.price}),e.jsx("div",{children:t.qty})]},r))})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{onClick:()=>ce(),className:"btn btn-outline",children:"Refresh OB"}),e.jsx("button",{onClick:()=>h(g,{type:"trade"}),className:"btn btn-success",children:"Start WS"}),e.jsx("button",{onClick:()=>m(),className:"btn btn-outline",children:"Stop WS"})]})]})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Positions (Simulator)"}),e.jsxs("div",{className:"mt-3 text-xs",children:[B.length===0?e.jsx("div",{className:"text-gray-400",children:"No open positions"}):B.map(t=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[t.symbol," • ",t.side]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[t.qty," @ ",t.avgEntry]})]}),e.jsxs("div",{className:`text-sm ${t.unrealizedPL>=0?"text-emerald-400":"text-rose-400"}`,children:["$",(t.unrealizedPL||0).toFixed(2)]})]},t.id)),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsx("button",{onClick:()=>q==null?void 0:q({symbol:g}),className:"btn btn-success",children:"Open Simulator"})})]})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Alerts"}),e.jsxs("div",{className:"mt-3 text-xs",children:[e.jsx("div",{className:"text-gray-400",children:"Manage alerts"}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:()=>alert("Open Alerts UI"),className:"btn btn-outline",children:"Open Alerts Panel"})})]})]})]}),e.jsx(Ie,{open:ye,onClose:()=>oe(!1),onSelect:we})]})}export{We as default};
