import{V as v,a as k}from"./lightweight-charts.production-D4lkRJ8h.js";function d(r){if(!r&&r!==0)return null;if(typeof r=="number")return Math.floor(r);const n=new Date(r);return isNaN(n.getTime())?null:Math.floor(n.getTime()/1e3)}function C(r,n={}){if(!r)return null;const a=v(r,{width:r.clientWidth,height:n.height||380,layout:{background:{color:n.background||"#05060a"},textColor:n.textColor||"#cbd5e1"},grid:{vertLines:{color:"rgba(255,255,255,0.03)"},horzLines:{color:"rgba(255,255,255,0.03)"}},crosshair:{mode:k.Normal},timeScale:{rightOffset:5,barSpacing:12,borderVisible:!1,timeVisible:!0,secondsVisible:!0,tickMarkFormatter:(t,o,e)=>{try{const i=new Date(t*1e3),c=String(i.getHours()).padStart(2,"0"),m=String(i.getMinutes()).padStart(2,"0"),N=String(i.getSeconds()).padStart(2,"0");return`${c}:${m}:${N}`}catch{return String(t)}}},rightPriceScale:{borderVisible:!1}}),s=a.addCandlestickSeries({upColor:"#16a34a",downColor:"#ef4444",borderVisible:!0,wickUpColor:"#16a34a",wickDownColor:"#ef4444",priceLineVisible:!1}),l=a.addHistogramSeries({priceScaleId:"",scaleMargins:{top:.8,bottom:0},priceFormat:{type:"volume"}}),u=[];function h(t=[]){const o=t.map(e=>{const i=d(e.time??e.t??e[0]);return i?{time:i,open:Number(e.open??e.o??e[1]??0),high:Number(e.high??e.h??e[2]??0),low:Number(e.low??e.l??e[3]??0),close:Number(e.close??e.c??e[4]??0)}:null}).filter(Boolean);try{s.setData(o)}catch{}return o}function f(t=[]){const o=t.map(e=>{const i=d(e.time??e.t??e[0]);if(!i)return null;const c=Number(e.open??e.o??e[1]??0),m=Number(e.close??e.c??e[4]??0);return{time:i,value:Number(e.volume??e.v??0),color:m>=c?"rgba(16,185,129,0.45)":"rgba(239,68,68,0.45)"}}).filter(Boolean);try{l.setData(o)}catch{}}function b(t){const o=d(t.time??t.t??t[0]);if(!o)return;const e={time:o,open:Number(t.open??t.o??t[1]??0),high:Number(t.high??t.h??t[2]??0),low:Number(t.low??t.l??t[3]??0),close:Number(t.close??t.c??t[4]??0)};try{s.update(e)}catch{}try{l.update({time:o,value:Number(t.volume??t.v??0),color:e.close>=e.open?"rgba(16,185,129,0.45)":"rgba(239,68,68,0.45)"})}catch{}}function g(t={}){const o=a.addLineSeries({color:t.color||"#60a5fa",lineWidth:t.lineWidth??2,priceLineVisible:!1});return u.push(o),o}function p(){u.forEach(t=>{try{a.removeSeries(t)}catch{}}),u.length=0}function y(t=[]){try{s.setMarkers(t)}catch{}}function S(){try{a.remove()}catch{}}return{chart:a,candleSeries:s,volumeSeries:l,setCandles:h,setVolume:f,updateLatest:b,addOverlayLine:g,resetOverlays:p,setMarkers:y,destroy:S}}function V(r){if(r)try{r.destroy&&r.destroy()}catch{}}export{V as d,C as i};
